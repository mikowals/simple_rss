<head>
  <title>Simple RSS reader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
  {{>newriver}}
</body>

<template name="newriver">
  <div class="container">
  
    {{>menubar}}
    {{>articleList}}
  
  </div>
</template>

<template name="menubar">
  <div id="menubar" class="row">
    <a id="modal_button" class="pull-left" data-target="#feeds_modal" data-toggle="modal" role="button"><i class="glyphicon glyphicon-chevron-down" /></a>
    {{#isolate}} {{#unless loaded}}<small class="label label-warning">Loading</small>{{/unless}} {{/isolate}}
    {{#isolate}} {{#if offline}}<small class="label label-default">{{offline}}</small>{{/if}} {{/isolate}}
    <small>{{loginButtons align="right"}}</small>
  </div>
</template>

<template name="feedList">
    <table class="table">
      
      <tbody>
        {{#each feeds}}
        <tr class="feed">{{>feed}}</tr>
        {{/each}}
      </tbody>
    </table>
</template>

<template name="feed">
  <td class="col-md-4"><small>{{title}}</small>{{#if selected}} <button id="removeFeed" class="btn btn-primary btn-mini pull-right">remove</button>{{/if}}</td>
  <td class="count"><small>{{article_count}}</small></td>
  <td class="lastDate"><small class=" time pull-right">{{>feedTime}}</small></td>
</template>

<template name="feedTime">
  {{timeago last_date}}
</template>

<template name="articleList">
  
    {{>feedModal}}
   
    <div id="stream">
      
      {{#each articles}}
      {{>article}}
      {{/each}}
      
    </div>
  
  <footer id="footer">
    <p>The CSS layout of this page was taken entirely from Dave Winer's <a href="http://river2.newsriver.org/">River2</a> template.</p>
    <p>The River2 template is based on the beautiful river project ( <a href="http://beautriver1.blorkmark.com/">Credits</a> ) and I had no involvment with it.</p>
    
	</footer>
  
</template>

<template name="article">
  <div class="section"> 
    <div class="header row-fluid">
      <h2>{{source}} </h2><a class='subscribe tooltip' href={{subscribeRss}} data-tip="follow {{source}}!"><i class="fa fa-rss-square"></i></a>
      <span class="spacer"></span>
      {{#isolate}}<time class="visible-md time pull-right"> {{timeago date}} </time>{{/isolate}}
    </div>
    <div class="article">
      <div class="header"><h3><a href="{{{link}}}">{{#if title}} {{title}} {{else}} Link {{/if}} </a></h3></div>
      <div class="description">{{{summary}}}</div>
      {{#isolate}}<div class="footer hidden-md"><time class="timeago"> {{timeago date}} </time></div>{{/isolate}}
    </div>
  </div>
</template>

<template name="articleTime">
  {{timeago date}}
</template>

<template name="feedModal">
  <div id="feeds_modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
     <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
      
      <h3 id="myModalLabel">Feeds</h3>
      
    </div>
    <div class="modal-body">
      {{>feedList}}
    </div>
    
    <div class="modal-footer">
      {{>modalButtons}}
    </div>
    
  </div>
  </div>
  </div>
</template>

<template name="modalButtons">
  <span class="form-inline">
    {{#if importOPML}}
    <a id="importCancel" class="btn btn-link btn-mini pull-left">Cancel</a>
    <span class="pull-right">
      <input id="opmlFile" type="file" class="fileUploader" multiple="multiple" />
      <a id="opmlUpload" class="btn"><i class="glyphicon glyphicon-upload"></i></a>
    </span> 
    {{else}}
    <a id="importToggle" class="btn btn-link btn-xs pull-left">Import</a>
    <span class="pull-right">
      <input type="url" class="input-xs" placeholder="Feed url to add" id="feedUrl" />
      <a id="addFeed" class="btn btn-primary btn-xs">Add</a>
    </span>
    {{/if}}
  </span>
</template>

<template name="smallLoader">
  <div class="pull-left small-loader" />
</template>

<template name="updated">
  {{#if updated}}
  <small class="label label-info">
  {{updated}}
  </small>
  {{/if}}
</template>
